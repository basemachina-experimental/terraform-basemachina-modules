# ========================================
# Terraform BaseMachina Modules Test 環境変数設定例
# ========================================
# このファイルをコピーして .env として保存し、実際の値を設定してください。
#
# コマンド: cp .env.example .env
#
# 注意: .env には機密情報が含まれるため、Gitにコミットしないでください

# ========================================
# AWSクレデンシャル（必須）
# ========================================

# AWS Access Key ID
AWS_ACCESS_KEY_ID=your-access-key-id

# AWS Secret Access Key
AWS_SECRET_ACCESS_KEY=your-secret-access-key

# AWSリージョン（デフォルト: ap-northeast-1）
AWS_DEFAULT_REGION=ap-northeast-1

# ========================================
# ネットワーク設定（必須）
# ========================================

# デプロイ先のVPC ID
TEST_VPC_ID=vpc-0123456789abcdef0

# Bridgeタスクを配置するプライベートサブネットIDのリスト（カンマ区切り）
# 高可用性のため、複数のアベイラビリティゾーンにまたがるサブネットを指定
TEST_PRIVATE_SUBNET_IDS=subnet-0123456789abcdef0,subnet-0123456789abcdef1

# ALBとNAT Gatewayを配置するパブリックサブネットIDのリスト（カンマ区切り）
# 高可用性のため、複数のアベイラビリティゾーンにまたがるサブネットを指定
TEST_PUBLIC_SUBNET_IDS=subnet-0123456789abcdef2,subnet-0123456789abcdef3

# ========================================
# BaseMachina設定（必須）
# ========================================

# BaseMachinaテナントID
TEST_TENANT_ID=your-tenant-id-here

# ========================================
# ドメイン設定（必須）
# ========================================

# テスト用のBridgeドメイン名
# 注意: 並列テスト実行時はユニークな値を使用してください
# 例: bridge-test-1.example.com, bridge-test-2.example.com
TEST_BRIDGE_DOMAIN_NAME=bridge-test.example.com

# 既存のRoute53 Hosted Zone ID
# ACM証明書のDNS検証レコードとALBへのAレコードが、このZoneに作成されます。
#
# Zone IDの確認方法:
#   aws route53 list-hosted-zones --query "HostedZones[?Name=='example.com.'].Id" --output text
#
# 新しいHosted Zoneの作成（必要な場合）:
#   aws route53 create-hosted-zone --name example.com --caller-reference $(date +%s)
#
TEST_ROUTE53_ZONE_ID=Z1234567890ABC

# ========================================
# オプション設定
# ========================================

# 実行するタスクの数（デフォルト: 1）
# TEST_DESIRED_COUNT=1

# ========================================
# テスト実行方法
# ========================================
#
# 1. 環境変数の読み込み:
#    source test/.env
#
# 2. テストの実行:
#    cd test/aws
#    go test -v -timeout 60m
#
# 3. 特定のテストのみ実行:
#    go test -v -timeout 60m -run TestECSFargateModule
#
# ========================================
# 注意事項（AWS）
# ========================================
#
# - ACM証明書はDNS検証で自動発行されます（初回は5-10分かかります）
# - NAT Gatewayが自動作成されます（約$0.045/時間 + データ転送料）
# - テスト完了後、リソースは自動的にクリーンアップされます
# - Hosted Zone自体は作成・削除されません（事前に作成してください）
# - 並列テスト実行時は、TEST_BRIDGE_DOMAIN_NAMEにユニークな値を設定してください
#

# ========================================
# GCP Cloud Run Module Test 環境変数設定
# ========================================

# ========================================
# GCPクレデンシャル（必須）
# ========================================

# GCPプロジェクトID
TEST_GCP_PROJECT_ID=your-gcp-project-id

# GCPリージョン（デフォルト: asia-northeast1）
TEST_GCP_REGION=asia-northeast1

# GCPサービスアカウントキーのパス（オプション）
# gcloud auth application-default loginを使用する場合は不要
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# ========================================
# BaseMachina設定（GCP、必須）
# ========================================

# BaseMachinaテナントID（AWSと共通の場合、上記のTEST_TENANT_IDを使用）
# TEST_TENANT_ID=your-tenant-id-here

# ========================================
# ドメイン設定（GCP、オプション）
# ========================================

# テスト用のBridgeドメイン名（HTTPS/DNSテストを実行する場合のみ）
# 注意: 並列テスト実行時はユニークな値を使用してください
# TEST_DOMAIN_NAME=bridge-test-gcp.example.com

# 既存のCloud DNS Managed Zone名（HTTPS/DNSテストを実行する場合のみ）
#
# Managed Zone名の確認方法:
#   gcloud dns managed-zones list --format="table(name,dnsName)"
#
# 新しいManaged Zoneの作成（必要な場合）:
#   gcloud dns managed-zones create example-com --dns-name="example.com." --description="Example domain"
#
# TEST_DNS_ZONE_NAME=example-com

# ========================================
# GCPテスト実行方法
# ========================================
#
# 1. 環境変数の読み込み:
#    source test/.env
#
# 2. GCP認証の設定:
#    gcloud auth application-default login
#
# 3. テストの実行:
#    cd test
#    go test -v ./gcp -timeout 60m
#
# 4. 特定のテストのみ実行:
#    go test -v ./gcp -timeout 60m -run TestCloudRunModule
#
# ========================================
# 注意事項（GCP）
# ========================================
#
# - SSL証明書は自動的にGoogle-managedで発行されます（初回は10-15分かかります）
# - Cloud SQLインスタンスが作成されます（db-f1-micro、約$7.67/月）
# - テスト完了後、リソースは自動的にクリーンアップされます
# - Cloud DNS Managed Zone自体は作成・削除されません（事前に作成してください）
# - 並列テスト実行時は、TEST_DOMAIN_NAMEにユニークな値を設定してください
# - HTTPSテストをスキップする場合は、TEST_DOMAIN_NAMEとTEST_DNS_ZONE_NAMEを設定しないでください
#
# ⚠️ セキュリティ警告（Cloud Armor）:
#   - テストでは全IPアドレス（0.0.0.0/0）からのアクセスを許可します
#   - これはテスト専用の設定です
#   - 本番環境では必ず特定のIPアドレスのみを許可するように設定してください
#
